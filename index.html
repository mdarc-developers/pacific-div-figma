<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ARRL Conference Mobile Companion App</title>
    <meta name="description" content="The app for amateur radio conferences." />
    <link rel="icon" type="image/png" href="/favicon.png" />

    <!-- Add this script as early as possible to avoid theme flash -->
    <script>
      (function () {
        try {
          var stored = localStorage.getItem("theme") || "light";
          var prefersDark =
            window.matchMedia &&
            window.matchMedia("(prefers-color-scheme: dark)").matches;
          var isDark =
            stored === "dark" || (stored === "system" && prefersDark);
          document.documentElement.classList.toggle("dark", isDark);
          // Optional, but helps native controls match:
          document.documentElement.style.colorScheme = isDark
            ? "dark"
            : "light";
        } catch (e) {
          // no-op
        }
      })();
    </script>

    <style>
      @font-face {
        font-family: "Roboto";
        font-style: normal;
        font-weight: 300;
        font-stretch: 100%;
        src: url(/assets/fonts/roboto-KFO7CnqEu92Fr1ME7kSn66aGLdTylUAMa3yUBA.woff2)
          format("woff2");
        unicode-range:
          U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC,
          U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193,
          U+2212, U+2215, U+FEFF, U+FFFD;
      }
    </style>
    <!-- Firebase Hosting runtime auto-configuration.
         /__/firebase/init.json is a JSON endpoint served by Firebase Hosting that
         contains the project config. The compat CDN SDK is not required.
         We read it synchronously before module scripts run so that firebase.ts
         can pick it up via window.__FIREBASE_DEFAULTS__.  An async fetch cannot
         be used here because separate <script type="module"> tags are evaluated
         concurrently — a top-level await in one does not block the others.
         The try/catch silently absorbs the expected 404 (or network error) during
         local development and *offline use*, where firebase.ts falls back to
         VITE_FIREBASE_* env vars instead. -->
    <script>
      (function () {
        try {
          var req = new XMLHttpRequest();
          req.open("GET", "/__/firebase/init.json", false /* synchronous */);
          req.send(null);
          if (req.status === 200) {
            window.__FIREBASE_DEFAULTS__ = {
              config: JSON.parse(req.responseText),
            };
          }
        } catch (_) {
          // Local dev or non-Hosting environment — firebase.ts falls back to env vars.
        }
      })();
    </script>
    <!-- reCAPTCHA Enterprise: deferred until server-side validation is implemented.
         Load the script only from production — do NOT add it here unconditionally
         because the site key is not authorized for localhost and will produce a
         visible badge error that also breaks offline use. -->
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
